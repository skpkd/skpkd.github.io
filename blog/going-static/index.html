<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Статическая перезагрузка сайта</title>
    <meta name="description" content="Как и зачем я перенес свой сайт на Jekyll.">
    <meta name="keywords" content="джекил, сайт, статический генератор">
    <link rel="canonical" href="http://likewhoa.ru/blog/going-static/">
    <link rel="alternate" type="application/rss+xml" title="Likewhoa" href="/feed.xml" />

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:700&amp;subset=cyrillic" rel="stylesheet">
    <!-- google search console -->
    <meta name="google-site-verification" content="FpxZXaSmPze2lNe7uty69AA9cZZT6meINY4n2VCDZCg" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/style.css?201802181528" type="text/css">

    <!-- Open Graph -->
    <meta property="og:locale" content="ru">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Статическая перезагрузка сайта">
    <meta property="og:description" content="Картинки и тексты.">
    <meta property="og:url" content="http://likewhoa.ru/blog/going-static/">
    <meta property="og:site_name" content="Likewhoa">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Статическая перезагрузка сайта" />
    <meta name="twitter:description" content="Как и зачем я перенес свой сайт на Jekyll." />
    <meta name="twitter:url" content="http://likewhoa.ru/blog/going-static/" />
    
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>


    <!-- Icons -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=YAo5ogjjko">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=YAo5ogjjko">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=YAo5ogjjko">
<link rel="manifest" href="/site.webmanifest?v=YAo5ogjjko">
<link rel="mask-icon" href="/safari-pinned-tab.svg?v=YAo5ogjjko" color="#5bbad5">
<link rel="shortcut icon" href="/favicon.ico?v=YAo5ogjjko">
<meta name="msapplication-TileColor" content="#000000">
<meta name="theme-color" content="#ffffff">
</head>

<body class="site animated fade-in-down">
<aside>
<h1>Статическая перезагрузка сайта</h1>
<span class="icon">&nbsp;</span>


<p class="subtitle">Современные принципы веб-разработки требуют не меньшего внимания от дизайнера, чем проектирование видимой части сайтов. Ежедневно встречая незнакомые термины, чувствуешь себя явно отстающим.</p>

<p>Это всегда заставляло меня думать: «Вот дерьмо, я же ничего про это не знаю, надо скорее учиться». Но этот момент всегда откладывался, так как реальной причины изучить всё не было. Единственное, что могло дать толчок — сделать что-то свое, без особой ответственности перед другими, ведь явно не всё получится сразу.</p>
<p>Последние 5 лет все сайты клиентов, которые делала наша лаборатория, мои личные проекты и сайты друзей — все работали на CMS разной степени сложности. При этом у них у всех была одна общая черта: функциональность была запредельно высокой и явно избыточной. Например, у Вордпресса есть стандартная возможность обновлять сайт через iOS приложение. Насколько круто бы это не звучало, сама идея абсурдна: я ни разу в жизни не испытывал необходимости написать пост, находясь вдалеке от моего ноута. Особенно, если речь идет о большой странице с картинками.</p>
<p>Вторая общая черта этих CMS: все они работали с базами данных, как правило, MySQL. Все страницы генерируются на лету, движок оборачивает содержимое шаблоном и показывает пользователю на сайте. Это занимает некоторое время. Все осложняется различными плагинами, часто плохо написанными, особенностями настройки <a href="http://wordpress.org/extend/plugins/w3-total-cache/">W3 Total Cache</a> и проблемами безопасности.</p>

<h2>Я маньяк контроля</h2>

<p>Основное, что подтолкнуло меня перейти на статические генераторы сайтов, это <em>контроль</em>. Попытка приручить контент, обернутый петлями CMS, функциями и кодом, который я не до конца понимаю да и вовсе не писал, было пустой тратой времени. Сверстать шаблон для прошлого движка Эгея было пыткой: от версии к версии менялась внутренняя структура да и в целом существование проекта остается под вопросом.</p>
<p>Удовольствия это не приносило никакого и я забросил блог на год с лишним, даже не смотря на то, что под рукой теперь были инструменты для публикации в блог <em>откуда угодно</em> и в <em>любое время</em>. На выбор осталось 2 варианта: забросить все окончательно или построить систему с нуля, собственноручно, избавившись от всех ненужных свистелок и перделок.</p>

<h2>Приручение Jekyll</h2>

<p>Разбираться с базами данных и функциями вызова переменных не было никакого желания, делать разрозненные HTML-странички — тем более. Совершенно случайно под руку попался <a href="http://cactusformac.com">Cactus</a> — предельно простой генератор статических сайтов, использующий язык шаблонов Jango. Но этот проект был слишком сырой и с мутными перспективами. Сложнее блога на стандартном макете или 2-3 страничек собрать в нем было рискованно: что-нибудь обязательно переставало работать или же требовало неординарных хаков. </p>
<p>На слуху был Jekyll, но он жутко пугал отсутствием интерфейса и массой незнакомых терминов. Но погуглив пару-тройку абстрактных вопросов относительно того, как в нём реализованы разные функции, сомнений не осталось: у джекила огромное сообщество, великолепная документация и мощная поддержка авторов проекта.</p>

<p>Теперь для публикации поста или страницы нужно:</p>

<ol>
<li>Создать текстовый файл с разметкой Markdown.</li>
<li>Добавить YAML Front Matter заголовок в начало этого файла, в котором указано, какой шаблон использовать, мета-данные страницы (заголовок, время и дата создания), картинка обложки, категория и теги.</li>
<li>Запустить `jekyll` в терминале.</li>
<li>Загрузить готовый сайт на гитхаб.</li>
</ol>

<p>Процесс может немного отличаться от раза к разу, но в целом это минимально необходимые шаги после того, как все шаблоны и блоки в `_layouts` и `_includes` сверстаны и подготовлены.</p>
<p>Процесс немногим более сложный, чем написание поста в Вордпрессе, ощутимо привлекательнее тем, что дает полный контроль над каждой мелочью. Я могу сам определить структуру сайта и папок, входящих в него; настроить иерархию; использовать любую автоматизацию, наподобие <a href="http://gruntjs.com/">Grunt</a> для оптимизации всего на свете и т. д. Разумеется, все это доступно практически в каждой CMS, но далеко не всегда так же прозрачно и часто требует кастомизации и дописывания кода для корректной работы.</p>
<p>Нельзя не отметить, что Jekyll — не для каждого. С ним непременно придется испачкать руки, разбираясь в формировании XML карт сайта, RSS, функции вызова социальных кнопок и куче других вещей, которые есть в Вордпрессе сразу из коробки. Но для меня изучение этих деталей и создание чего-то с нуля несло намного больше вдохновение, чем установка очередного плагина в Вордпрессе, который сделает все автоматически.</p>
<p>Jekyll помог мне достичь нескольких важных целей: плотнее познакомиться с базовыми принципами HTML5 и CSS3; дал возможность делать страницы с уникальным в рамках сайта дизайном и структурой; разобраться с CSS препроцессорами типа <a href="http://lesscss.org/">LESS</a> и перестать теряться в гигантском файле стилей и сделать сайт адаптивным.</p>

<h2>Что вдохновило в процессе</h2>

<h3>HTML5 Boilerplate</h3>

<p>Одной из самых значимых вещей в процессе ознакомления с HTML5 было изучение <a href="http://html5boilerplate.com/">HTML5 Boilerplate</a>. Все файлы очень подробно прокомментированы, поэтому понять что, как и почему используется действительно легко. В качестве удобного справочника по элементам типа `figure`, `section`, `article` и т.д. я использовал <a href="http://html5doctor.com/ «HTML5 Doctor»">HTML5 Doctor</a>.</p>

<h3>Less is More</h3>

<div class="with-side">
<p>Принцип препроцессоров отпугнул меня сразу, как только я впервые услышал про <a href="http://lesscss.org/">Less</a> и <a href="http://sass-lang.com/about/">Sass</a>. Борьба с CSS в факультативном режиме и так довалась мне не легко, а внесение еще одного уровня сложности к этому казалось абсурдным. Вторым знакомством была попытка хотя бы поэкспериментировать с Less, тем более нашелся простой и наглядный инструмент — <a href="https://incident57.com/codekit/">CodeKit</a>. Принцип использования переменных для шрифтов и цветов выглядел привлекательно, но будучи дизайнером мне не сильно-то хотелось сталкиваться с это не-совсем-дружелюбной-средой из области программирования.</p>
	<div class="side">
    	<span>
    		К моменту создания текущей темы оформления я перешел с Less на Sass, полюбил <a href="http://bourbon.io/">Bourbon</a> <del>за название</del> а так же <a href="http://neat.bourbon.io/">Neat</a> для управления mixin’ами и сеткой.
    	</span>
	</div>
</div>



<p>Основная прелесть Less для меня — синтаксис. Можно даже ничего не менять в существующих css файлах, достаточно было изменить расширение файлов с .css на .less и все уже работало. Все новое можно внедрять постепенно. Использование переменных и миксинов помогает очень быстро собрать прототип страницы и позволяет мыслить модульно и комплексно.
</p>

<h2>Модульные сетки</h2>

<p>Больше всего в модульных сетках меня отталкивает их антисемантическая структура. Я никогда не хотел дружить с абстрактными `.grid_x`, .`push_x` или `col_x`. Это здорово для больших проектов, быстрого прототипирования или разработки, но в своем проекте хотелось обойтись ванильным css. Не сказать, что это получилось идеально, но благодаря <a href="http://coding.smashingmagazine.com/2011/08/23/the-semantic-grid-system-page-layout-for-tomorrow/">ряду статей</a> и <a href="http://semantic.gs/">проектов</a> задел на будущее сделан.</p>

<h2>Перезагрузка проекта</h2>

<p>Переход на Jekyll подтолкнул меня к полной реструктуризации сайта. Я буду стараться писать большие и цельные статьи в блог, с нормальным оформлением, а мелкие заметки, цитаты и картинки переедут на отдельную страницу или в свой раздел.</p>

<h2>Что осталось доделать</h2>

<p>Перенос постов из прошлого движка наконец-то завершен, в чем мне сильно помог <a href="https://ru.wikipedia.org/wiki/Automator">Автоматор</a> в OS X. Хоть записей в блоге не так уж и много, но заполнить для каждого имя файла и 5-6 полей в YAML-заголовке — ужасная рутина. Многим не хватает новых элементов, которых не было в прошлом шаблоне: обложки и превью страницы; большого количества новых блоков верстки типа сносок и так далее.</p>

<h3>Адаптивная графика</h3>

<p>Отдельным пунктом стоит доработка и оптимизация картинок. Если остальные составляющие оптимизированы худо-бедно, то с картинками придется основательно потрудится. Сейчас они оптимизированы алгоритмами сжатия без потерь, что экономит до 60% веса файла, но все равно загружаются в полном масштабе. Научить Джекилл нарезать их для в разных размерах для десктопов и смартфонов еще предстоит и будет <a href="http://www.alistapart.com/articles/responsive-images-how-they-almost-worked-and-what-we-need/">очень не просто</a>, так что этот пункт задвинут в самый конец очереди.</p>

<h3>Контроль версий</h3>

<p>Выкладывать исходники сайта в открытый доступ пока не хватает духу, ребята засмеют же. Так что для контроля версий я использую приватный репозиторий на BitBucket, в то время как сайт публикую на <a href="http://github.com/antown">GitHub</a>. Такое разделение позволяет познакомиться с системами более плотно и выбрать более удобную, раз уж они обе поддерживают бесплатный хостинг статических сайтов.</p>

</aside>
<div class="navline">
<article class="flex-menu ">

  <div class="bread">
  <ol class="bread-list">
    <li class="home"><a href="/">Главная</a></li>
    <li>Статическая перезагрузка сайта</li>
  </ol>
</div>

<div><form class="search-container" action="https://www.google.com/search" method="GET">
  <input id="search-box" type="text" class="search-box" name="q" />
  <label for="search-box"><span class="search-icon"><svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path stroke="none" fill-rule="inherit" clip-rule="evenodd" d="M16 14.5l-4.399-4.399a6.212 6.212 0 0 0 1.148-3.602 6.25 6.25 0 1 0-12.5 0 6.25 6.25 0 0 0 6.251 6.25 6.212 6.212 0 0 0 3.602-1.148L14.5 16l1.5-1.5zM1.25 6.501a5.251 5.251 0 1 1 10.502 0 5.251 5.251 0 0 1-10.502 0z"></path></svg></span></label>
  <!-- <input type="submit" id="search-submit" /> -->
  <input type="hidden" name="sitesearch" value="likewhoa.ru">
</form></div>

<div class="modal">
  <a class="button" href="#0">Подписаться</a>
</div>

</article>
</div>

<!-- modal subscribe -->

  <div class="cd-modal"> <!-- this is the entire modal form, including the background -->
    <div class="cd-modal-container"> <!-- this is the container wrapper -->
          <h3>Подписка на блог</h3>Через <a href="http://likewhoa.ru/feed.xml">RSS</a> и <a href="t.me/likewhoa">телеграм</a>
          <!-- <a href="#0" class="close-modal">Close</a> -->
    </div> <!-- cd-user-modal-container -->
  </div> <!-- cd-user-modal -->
  <script src="/static/index.js"></script>
  <script src="/static/zoom.js"></script>
  <script src="/static/jquery.fitvids.js"></script>
  <script src="/static/fotorama.js"></script>

<!-- google counter -->
  <script type="text/javascript">
  
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26451647-3']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  
  </script>
<!-- end google counter -->
<!-- Yandex.Metrika counter --> <script type="text/javascript" > (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter11453989 = new Ya.Metrika2({ id:11453989, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/tag.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks2"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/11453989" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
</body>
</html>